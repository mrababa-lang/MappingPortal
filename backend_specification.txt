
# SlashData Vehicle Portal - Backend Technical Specification

## 1. Authentication & Security
- **Mechanism**: Stateless JWT (JSON Web Token).
- **Endpoint**: `POST /api/auth/login`
- **Role Enforcement**: `ADMIN`, `MAPPING_ADMIN`, `MAPPING_USER`.

## 2. ADP Master Hub - Bulk Upload Specification
The system handles raw JSON data payloads for mass synchronization. The frontend transmits the ENTIRE dataset parsed from the source file.

- **Endpoint**: `POST /api/adp/master/bulk-upload`
- **Consumes**: `application/json`
- **Payload**: An array of objects representing ALL source CSV rows (Expect up to 15,000+ records in a single call).

### Backend Processing Requirements:
1. **Unbounded JSON Processing**: The backend MUST NOT limit processing to a default size (like 50). It should iterate through the entire array provided in the request body.

2. **Column Mapping Aliases (Normalized Keys)**:
   The backend should perform case-insensitive matching or normalization of keys:
   - `adpMakeId`: "adpmakeid", "makecode", "makeid"
   - `makeEnDesc`: "makeendesc", "descen", "makeen"
   - `makeArDesc`: "makeardesc", "descar", "makear"
   - `adpModelId`: "adpmodelid", "modelcode", "modelid"
   - `modelEnDesc`: "modelendesc", "modeldescen"
   - `modelArDesc`: "modelardesc", "modeldescar"
   - `adpTypeId`: "adptypeid", "typecode", "typeid"
   - `typeEnDesc`: "typeendesc", "typedescen"
   - `typeArDesc`: "typeardesc", "typedescar"
   - `kindCode`: "kindcode", "classificationcode"
   - `kindEnDesc`: "kindendesc", "classificationen"
   - `kindArDesc`: "kindardesc", "kinddescar", "classificationar"

3. **Upsert Strategy**:
   - **Unique Key**: Composite of (`adpMakeId`, `adpModelId`, `adpTypeId`).
   - If match found: Update descriptions and Kind/Classification fields.
   - If no match: Insert new record.

4. **Response Structure**:
   The response must reflect the total count of the entire dataset.
   ```json
   {
     "data": {
       "recordsAdded": 12450,
       "recordsSkipped": 1200,
       "errorCount": 5,
       "message": "Processed 13655 rows. Sync complete."
     }
   }
   ```

## 3. Performance Targets
- **Throughput**: 15,000 rows / 10s.
- **Memory Management**: The backend should use efficient JSON parsing (e.g., Jackson `MappingIterator` or GSON `JsonReader`) if memory constraints exist, but it MUST process all items in the payload.
