# SlashData Vehicle Portal - Enhancement & Roadmap

This document outlines the roadmap to transition the application from the current "Mock/Prototype" state to a robust "Production" system.

**Status Key:**
[ ] = Pending / To Do

================================================================================
CATEGORY 1: FRONTEND & TECHNICAL ARCHITECTURE
(Focus: Code quality, Performance, Libraries, Security)
================================================================================

## 1. Routing & Navigation
- [ ] **React Router Integration**: 
  - Replace state-based `currentView` in `App.tsx` with `react-router-dom`.
  - Implement `loader` functions for route-based data fetching.
  - Enable URL deep linking (e.g., `/adp/mapping?status=MISSING_MODEL&dateFrom=2023-01-01`).
  - Implement Protected Routes wrapper for authentication checks.

## 2. API & Data Layer
- [ ] **Service Layer Refactor**:
  - Deprecate `storageService.ts` (LocalStorage).
  - Create `services/api.ts` using `axios` instance with interceptors.
  - Handle JWT token injection and 401 (Unauthorized) refresh flows.
- [ ] **TanStack Query Expansion**:
  - Refactor Dashboard, ADP Master, and Mapping views to use `useQuery` hooks instead of direct service calls.
  - Implement `useMutation` for ADP Mapping actions (Approve/Reject) with Optimistic UI updates.

## 3. Security & AI Proxy
- [ ] **Server-Side AI Integration**:
  - Remove `GEMINI_API_KEY` from frontend code/env.
  - Refactor `geminiService.ts` to call backend endpoints (`/api/ai/suggest`).
- [ ] **Authentication Flow**:
  - Replace mock login with real Auth Provider context.
  - Implement session timeout handling.

## 4. Code Quality & Testing
- [ ] **Error Boundaries**: Wrap main views to catch React rendering errors gracefully.
- [ ] **Unit Testing**: Add Vitest for utility functions and hooks.
- [ ] **E2E Testing**: Add Playwright tests for critical paths (Login -> Map Vehicle -> Approve).

================================================================================
CATEGORY 2: BUSINESS & FUNCTIONAL ENHANCEMENTS
(Focus: User Features, Business Logic, Workflows)
================================================================================

## 1. Data Management & Bulk Operations
- [ ] **Server-Side Bulk Import**:
  - Change "Bulk Import" to upload files to backend (`POST /api/upload`) for async processing.
  - Add a "Job Status" notification center for long-running uploads.
- [ ] **Batch Operations**:
  - Add checkboxes to Makes/Models/ADP tables.
  - Implement "Bulk Delete" and "Bulk Approve" actions.
- [ ] **Advanced Mapping Logic**:
  - Implement "Ignore Rule": Allow users to permanently ignore specific ADP patterns.
  - **Conflict Resolution**: Logic to handle cases where the source ADP data changes (e.g., description update) after it has already been mapped.

## 2. AI & Automation
- [ ] **Batch Auto-Map**:
  - Select multiple unmapped ADP records and trigger "AI Auto-Map" to process them in background.
- [ ] **Auto-Map Confidence Scores**: 
  - Display AI confidence score (High/Medium/Low) next to suggestions.
  - Allow "Auto-approve High Confidence" setting.

## 3. Reporting & Export
- [ ] **Advanced Exporting**:
  - Allow exporting "Filtered Results" vs "All Data".
  - Support Excel (.xlsx) format in addition to CSV.
  - Generate PDF reports for "Monthly Mapping Summary".

## 4. User Administration
- [ ] **Granular Permissions**: 
  - Separate "Approve" permission from "Edit" permission.
  - Add "Read-Only" role for Auditors.
- [ ] **User Activity Logs**: Detailed view of specific user actions (User Detail View).

================================================================================
CATEGORY 3: UI/UX & ACCESSIBILITY
(Focus: Usability, Design, Localization)
================================================================================

## 1. Localization (RTL)
- [ ] **Full Arabic UI**: Since the data is bilingual, add a toggle to switch the entire application interface (Sidebar, Headers, Modals) to Arabic/RTL layout.

## 2. Visual Verification & Tools
- [ ] **Vehicle Image Gallery**: Auto-fetch or upload reference images for SD Models to assist mappers in visual verification.
- [ ] **Diff Viewer**: Visual side-by-side comparison (Before vs After) in the Audit History and Review screens.

## 3. General UI
- [ ] **Dark Mode**: Toggle for low-light working environments.
- [ ] **Keyboard Shortcuts**: Hotkeys for rapid approval/rejection (e.g., 'A' to Approve, 'R' to Reject) in Review Mode.
- [ ] **Virtualization for Models**: Implement virtualization for the Models list as it grows into thousands of records.

================================================================================
SECTION 4: RECENTLY COMPLETED LOG
================================================================================
- [X] **ADP Vehicle Types View**: Created new view to map unique ADP types to internal Vehicle Types.
- [X] **UX Improvements**: Added Info Tooltips to all Bulk Import buttons specifying CSV format.
- [X] **Filter Enhancements**: Added Vehicle Type filtering to Makes and Models views.
- [X] **Dashboard UI**: Implemented Trend Charts, Activity Feed, and Date Filters.
- [X] **Form Handling**: Refactored Makes, Types, Users, and Models to use Zod & React Hook Form.
- [X] **Virtualization**: Implemented in `ADPMasterView` for high-performance rendering.
